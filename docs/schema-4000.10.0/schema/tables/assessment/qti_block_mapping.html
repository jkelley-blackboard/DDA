<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <title>Blackboard database schema documentation</title>
  <link rel="stylesheet" type="text/css" href="../../styles.css" />

  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
  <script type="text/javascript" src="../../typealong.js"></script>

  <script type="text/javascript">
var currentElement = null;

function setClass(element, value)
{
  if ( element )
  {
    element.className = value;
  }
}

function selectElement(element)
{
  setClass(currentElement, "");
  currentElement = element;
  setClass(currentElement, "current");
}

function selectSchema(element, overview)
{
  selectElement(element);
  top.contentFrame.location = overview;
}
  </script>
</head>
  <body>


<form name="search_form" id="searchForm">
  <input type="hidden" id="topLevel" value="../.."/>
  <input type="text" id="searchBox" name="page" title="Search"/>
  <img src="../../images/spinner.gif" alt="Loading..." class="spinner" style="display: none"/>
</form>

<script type="text/javascript">
  // Hide search form if there is no internet connection/access to jquery libraries
  if (typeof window.$ !== 'function')
  {
    window.noInternet = true;
    document.getElementById('searchForm').style.display = 'none';
  }
</script>

<div class="navigation">
  <a href="../../index.html" target="_parent">Home</a>
  &gt;
  <a href="../../overview-schema-assessment.html">assessment</a>
</div>

<h1>qti_block_mapping
  <p>Each question-block is a single row in qti_asi_data
      where the qti xml contains a list
      of all the questions it references.
      This qti_block_mapping reflects that relationship of
      1 question block and n questions
      This table is actually dual-purpose, also supporting random blocks.
      Each random-block is a single row in qti_asi_data.  Historically a random block
      had a single source pool stored both in the qti xml and in objectbank_pk1.  With the support
      of multiple source pools for a random block, this table augments that column which is being
      left in the db to avoid any upgrade-time overhead. When used for random blocks we reflect
      the following relationship.
      1 random block and n pools.
      It is 'ok' to re-use this table because it is modeling a
      1 qti_asi_data_pk1 and n qti_asi_data_pk1
      style of relationship in both cases.</p>
</h1>


<h3><span>Primary key constraint</span></h3>
<div>
    <p class="primaryName">qti_block_mapping_pk</p>
  <ul>
<li> <a href="#column-pk1">pk1</a>
</li>
  </ul>
</div>

  <h3><span>Foreign key constraints</span></h3>
  <div>
    <ol>
<li>
    qti_blck_mppng_qustn_blck_fk1
    <span>(On Delete Cascade)</span>
  <ul>
<li> <a href="#column-question_block_pk1">question_block_pk1</a>
</li>
  </ul>
</li>
<li>
    qti_blck_mppng_qstn_fk2
  <ul>
<li> <a href="#column-question_pk1">question_pk1</a>
</li>
  </ul>
</li>
    </ol>
  </div>


  <h3><span>Indexes</span></h3>
  <div>
    <ol>
<li> qti_block_mapping_if1
  <ul>
<li> <a href="#column-question_block_pk1">question_block_pk1</a>
</li>
  </ul>
</li>
<li> qti_block_mapping_if2
  <ul>
<li> <a href="#column-question_pk1">question_pk1</a>
</li>
  </ul>
</li>
    </ol>
  </div>


<table title="Columns">
<thead>
<tr>
  <th>Column name</th>
  <th>Data type</th>
  <th>Default value</th>
  <th>Value constraint</th>
  <th>Default constraint</th>
  <th>Identity?</th>
  <th>Nullable?</th>
  <th>Description</th>
</tr>
</thead>
  <tbody>
<tr>
  <td><a name="column-pk1">pk1</a></td>
  <td>id</td>
    <td></td>
    <td></td>
    <td></td>
  <td>true</td>
  <td>false</td>
  <td>
  <p>This table really doesn't need a pk1 at all, but our framework dao code likes it when there is a pk1</p>
  </td>
</tr>
<tr>
  <td><a name="column-question_block_pk1">question_block_pk1</a></td>
  <td>id</td>
    <td></td>
    <td></td>
    <td></td>
  <td>false</td>
  <td>false</td>
  <td>
  <p>FK to qti_asi_data for the question block or random block being dealt with.  When the question-block or random block qti is deleted, all matching rows in this table will be deleted through a cascade-delete constraint</p>
  </td>
</tr>
<tr>
  <td><a name="column-question_pk1">question_pk1</a></td>
  <td>id</td>
    <td></td>
    <td></td>
    <td></td>
  <td>false</td>
  <td>false</td>
  <td>
  <p>FK to qti_asi_data if for a question block, for each question in the block; if for a random block, for each referenced source pool in the block.  Deletion of the question (question block case) or pool (random block case) will fail due to this constraint because java code has to be used to remove the reference from the question blocks QTI xml</p>
  </td>
</tr>
  </tbody>
</table>

  <div class="copyright">
    Version 4000.10.0, copyright &copy; 2010-2012 Blackboard Inc. All Rights Reserved
  </div>
</body>
</html>
