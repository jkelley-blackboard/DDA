<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <title>Blackboard database schema documentation</title>
  <link rel="stylesheet" type="text/css" href="../../styles.css" />

  <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
  <script type="text/javascript" src="../../typealong.js"></script>

  <script type="text/javascript">
var currentElement = null;

function setClass(element, value)
{
  if ( element )
  {
    element.className = value;
  }
}

function selectElement(element)
{
  setClass(currentElement, "");
  currentElement = element;
  setClass(currentElement, "current");
}

function selectSchema(element, overview)
{
  selectElement(element);
  top.contentFrame.location = overview;
}
  </script>
</head>
  <body>


<form name="search_form" id="searchForm">
  <input type="hidden" id="topLevel" value="../.."/>
  <input type="text" id="searchBox" name="page" title="Search"/>
  <img src="../../images/spinner.gif" alt="Loading..." class="spinner" style="display: none"/>
</form>

<script type="text/javascript">
  // Hide search form if there is no internet connection/access to jquery libraries
  if (typeof window.$ !== 'function')
  {
    window.noInternet = true;
    document.getElementById('searchForm').style.display = 'none';
  }
</script>

<div class="navigation">
  <a href="../../index.html" target="_parent">Home</a>
  &gt;
  <a href="../../overview-schema-discussionboard.html">discussionboard</a>
</div>

<h1>discussion_stream_event
  <p>Stores discussion related stream events to populate the My Blackboard stream viewer</p>
</h1>


<h3><span>Primary key constraint</span></h3>
<div>
    <p class="primaryName">discussion_stream_event_pk</p>
  <p>This is the name of primary key constraint</p>
  <ul>
<li> <a href="#column-pk1">pk1</a>
</li>
  </ul>
</div>

  <h3><span>Foreign key constraints</span></h3>
  <div>
    <ol>
<li>
    discussion_stream_event_fk1
    <span>(On Delete SetNull)</span>
  <p>This is a foreign key referencing the primary key of the msg_main table, referential action cascade on delete (setnull).</p>
  <ul>
<li> <a href="#column-msg_main_pk1">msg_main_pk1</a>
</li>
  </ul>
</li>
<li>
    discussion_stream_event_fk2
    <span>(On Delete SetNull)</span>
  <p>This is a foreign key referencing the primary key of the forum_main table, referential action cascade on delete (setnull).</p>
  <ul>
<li> <a href="#column-forum_main_pk1">forum_main_pk1</a>
</li>
  </ul>
</li>
<li>
    discussion_stream_event_fk3
    <span>(On Delete SetNull)</span>
  <p>This is a foreign key referencing the primary key of the users table, referential action cascade on delete (setnull).</p>
  <ul>
<li> <a href="#column-actor_pk1">actor_pk1</a>
</li>
  </ul>
</li>
<li>
    discussion_stream_event_fk4
    <span>(On Delete SetNull)</span>
  <p>This is a foreign key referencing the primary key of the users table, referential action cascade on delete (setnull).</p>
  <ul>
<li> <a href="#column-actee_pk1">actee_pk1</a>
</li>
  </ul>
</li>
<li>
    discussion_stream_event_fk5
    <span>(On Delete SetNull)</span>
  <p>This is a foreign key referencing the primary key of the course_main table, referential action cascade on delete (setnull).</p>
  <ul>
<li> <a href="#column-crsmain_pk1">crsmain_pk1</a>
</li>
  </ul>
</li>
<li>
    discussion_stream_event_fk6
    <span>(On Delete SetNull)</span>
  <p>This is a foreign key referencing the primary key of the groups table, referential action cascade on delete (setnull).</p>
  <ul>
<li> <a href="#column-group_pk1">group_pk1</a>
</li>
  </ul>
</li>
<li>
    discussion_stream_event_fk7
    <span>(On Delete SetNull)</span>
  <p>This is a foreign key referencing the primary key of the course_contents table, referential action cascade on delete (setnull).</p>
  <ul>
<li> <a href="#column-course_contents_pk1">course_contents_pk1</a>
</li>
  </ul>
</li>
<li>
    discussion_stream_event_fk8
    <span>(On Delete SetNull)</span>
  <p>This is a foreign key referencing the primary key of the msg_main table, referential action cascade on delete (cascade).</p>
  <ul>
<li> <a href="#column-parent_msg_main_pk1">parent_msg_main_pk1</a>
</li>
  </ul>
</li>
<li>
    discussion_stream_event_fk9
    <span>(On Delete SetNull)</span>
  <p>This is a foreign key referencing the primary key of the course_contents table, referential action cascade on delete (setnull).</p>
  <ul>
<li> <a href="#column-ultra_group_forum_contents_pk1">ultra_group_forum_contents_pk1</a>
</li>
  </ul>
</li>
<li>
    discussion_stream_event_fk10
    <span>(On Delete SetNull)</span>
  <p>This is a foreign key referencing the primary key of the msg_main table, referential action cascade on delete (setnull).</p>
  <ul>
<li> <a href="#column-non_group_thread_msg_main_pk1">non_group_thread_msg_main_pk1</a>
</li>
  </ul>
</li>
<li>
    discussion_stream_event_fk11
    <span>(On Delete SetNull)</span>
  <p>This is a foreign key referencing the primary key of the users table, referential action cascade on delete (setnull).</p>
  <ul>
<li> <a href="#column-top_level_response_users_pk1">top_level_response_users_pk1</a>
</li>
  </ul>
</li>
    </ol>
  </div>


  <h3><span>Indexes</span></h3>
  <div>
    <ol>
<li> discussion_stream_event_if1
  <ul>
<li> <a href="#column-msg_main_pk1">msg_main_pk1</a>
</li>
  </ul>
</li>
<li> discussion_stream_event_if2
  <ul>
<li> <a href="#column-forum_main_pk1">forum_main_pk1</a>
</li>
  </ul>
</li>
<li> discussion_stream_event_if3
  <ul>
<li> <a href="#column-actor_pk1">actor_pk1</a>
</li>
  </ul>
</li>
<li> discussion_stream_event_if4
  <ul>
<li> <a href="#column-actee_pk1">actee_pk1</a>
</li>
  </ul>
</li>
<li> discussion_stream_event_if5
  <ul>
<li> <a href="#column-crsmain_pk1">crsmain_pk1</a>
</li>
  </ul>
</li>
<li> discussion_stream_event_if6
  <ul>
<li> <a href="#column-group_pk1">group_pk1</a>
</li>
  </ul>
</li>
<li> discussion_stream_event_if7
  <ul>
<li> <a href="#column-course_contents_pk1">course_contents_pk1</a>
</li>
  </ul>
</li>
<li> discussion_stream_event_if8
  <ul>
<li> <a href="#column-parent_msg_main_pk1">parent_msg_main_pk1</a>
</li>
  </ul>
</li>
<li> discussion_stream_event_if9
  <ul>
<li> <a href="#column-ultra_group_forum_contents_pk1">ultra_group_forum_contents_pk1</a>
</li>
  </ul>
</li>
<li> discussion_stream_event_if10
  <ul>
<li> <a href="#column-non_group_thread_msg_main_pk1">non_group_thread_msg_main_pk1</a>
</li>
  </ul>
</li>
<li> discussion_stream_event_if11
  <ul>
<li> <a href="#column-top_level_response_users_pk1">top_level_response_users_pk1</a>
</li>
  </ul>
</li>
    </ol>
  </div>


<table title="Columns">
<thead>
<tr>
  <th>Column name</th>
  <th>Data type</th>
  <th>Default value</th>
  <th>Value constraint</th>
  <th>Default constraint</th>
  <th>Identity?</th>
  <th>Nullable?</th>
  <th>Description</th>
</tr>
</thead>
  <tbody>
<tr>
  <td><a name="column-pk1">pk1</a></td>
  <td>id</td>
    <td></td>
    <td></td>
    <td></td>
  <td>true</td>
  <td>false</td>
  <td>
  <p>This is the surrogate primary key for the table.</p>
  </td>
</tr>
<tr>
  <td><a name="column-actor_pk1">actor_pk1</a></td>
  <td>id</td>
    <td></td>
    <td></td>
    <td></td>
  <td>false</td>
  <td>true</td>
  <td>
  <p>FK to users.pk1 for the person doing the action - i.e. a comment on a post would set the commenter in actor_pk1.  This column will be set to NULL if the user was deleted in which case this row should be ignored.</p>
  </td>
</tr>
<tr>
  <td><a name="column-actee_pk1">actee_pk1</a></td>
  <td>id</td>
    <td></td>
    <td></td>
    <td></td>
  <td>false</td>
  <td>true</td>
  <td>
  <p>FK to users.pk1 for the person the action was done against - i.e. a comment on a post would set the post-author in actee_pk1.  This will be NULL if the stream event is not in response to a particular user or if the user was deleted.</p>
  </td>
</tr>
<tr>
  <td><a name="column-crsmain_pk1">crsmain_pk1</a></td>
  <td>id</td>
    <td></td>
    <td></td>
    <td></td>
  <td>false</td>
  <td>true</td>
  <td>
  <p>FK to course_main for the course in which the event occurs.  This will be NULL if the stream event occurs within a community discussion board or if the course was deleted.</p>
  </td>
</tr>
<tr>
  <td><a name="column-group_pk1">group_pk1</a></td>
  <td>id</td>
    <td></td>
    <td></td>
    <td></td>
  <td>false</td>
  <td>true</td>
  <td>
  <p>FK to groups for the group in which the event occurs.  This will be NULL for non group discussion boards or if the group was deleted.</p>
  </td>
</tr>
<tr>
  <td><a name="column-event_date">event_date</a></td>
  <td>datetime</td>
    <td></td>
    <td></td>
    <td></td>
  <td>false</td>
  <td>false</td>
  <td>
  <p>Date and time the event occurred.</p>
  </td>
</tr>
<tr>
  <td><a name="column-event_modified_date">event_modified_date</a></td>
  <td>datetime</td>
    <td></td>
    <td></td>
    <td></td>
  <td>false</td>
  <td>false</td>
  <td>
  <p>Date and time the event was modified (only set in response to a cascade setnull trigger - see FKs below).</p>
  </td>
</tr>
<tr>
  <td><a name="column-course_contents_pk1">course_contents_pk1</a></td>
  <td>id</td>
    <td></td>
    <td></td>
    <td></td>
  <td>false</td>
  <td>true</td>
  <td>
  <p>FK to course_contents.pk1 if the event pertains to a course contents item.  This will be NULL if the event does not have a course_contents.pk1 or if the course content was deleted.</p>
  </td>
</tr>
<tr>
  <td><a name="column-ultra_group_forum_contents_pk1">ultra_group_forum_contents_pk1</a></td>
  <td>id</td>
    <td></td>
    <td></td>
    <td></td>
  <td>false</td>
  <td>true</td>
  <td>
  <p>FK to course_contents.pk1 if the event is fired in a group discussion (real forum).  This will be NULL if the forum related to this event is not group disscussion. This column is only used for group discussions in an Ultra course.</p>
  </td>
</tr>
<tr>
  <td><a name="column-event_type">event_type</a></td>
  <td>varchar(2)</td>
    <td></td>
    <td class="valueConstraint">dis_stream_event_type_ck
      <ul>
          <li> <span>FC</span>
  <p>Forum created event</p>
          </li>
          <li> <span>TP</span>
  <p>Thread posted event</p>
          </li>
          <li> <span>RP</span>
  <p>Reply posted event</p>
          </li>
          <li> <span>PR</span>
  <p>Post rated event</p>
          </li>
          <li> <span>FS</span>
  <p>Forum subscribed event</p>
          </li>
          <li> <span>FU</span>
  <p>Forum unsubscribed event</p>
          </li>
          <li> <span>TS</span>
  <p>Thread subscribed event</p>
          </li>
          <li> <span>TU</span>
  <p>Thread unsubscribed event</p>
          </li>
      </ul>
    </td>
    <td></td>
  <td>false</td>
  <td>false</td>
  <td>
  <p>The event type identifier constrained to the below values.</p>
  </td>
</tr>
<tr>
  <td><a name="column-event_text">event_text</a></td>
  <td>nvarchar(333)</td>
    <td></td>
    <td></td>
    <td></td>
  <td>false</td>
  <td>true</td>
  <td>
  <p>Text specific to this event - not the stream text directly, but the dynamic text to substitute into an event-appropriate message when rendering the stream.</p>
  </td>
</tr>
<tr>
  <td><a name="column-thread_subject">thread_subject</a></td>
  <td>nvarchar(300)</td>
    <td></td>
    <td></td>
    <td></td>
  <td>false</td>
  <td>true</td>
  <td>
  <p>This is the thread subject as of the time when the message was first posted. AB#2409137: A task was created to update this value if it ever changes.</p>
  </td>
</tr>
<tr>
  <td><a name="column-forum_main_pk1">forum_main_pk1</a></td>
  <td>id</td>
    <td></td>
    <td></td>
    <td></td>
  <td>false</td>
  <td>true</td>
  <td>
  <p>This is a foreign key referencing the primary key of the forum_main table.  This column will be set to NULL if the forum was deleted in which case this row will be ignored for new events and otherwise used to purge existing events from the UI</p>
  </td>
</tr>
<tr>
  <td><a name="column-msg_main_pk1">msg_main_pk1</a></td>
  <td>id</td>
    <td></td>
    <td></td>
    <td></td>
  <td>false</td>
  <td>true</td>
  <td>
  <p>This is a foreign key referencing the primary key of the msg_main table.  This column will be set to null if the msg was deleted in which case the row will be ignored for new events and otherwise used to purge existing events from the UI</p>
  </td>
</tr>
<tr>
  <td><a name="column-parent_msg_main_pk1">parent_msg_main_pk1</a></td>
  <td>id</td>
    <td></td>
    <td></td>
    <td></td>
  <td>false</td>
  <td>true</td>
  <td>
  <p>This is a foreign key referencing the primary key of the msg_main table for the parent thread message.</p>
  </td>
</tr>
<tr>
  <td><a name="column-non_group_thread_msg_main_pk1">non_group_thread_msg_main_pk1</a></td>
  <td>id</td>
    <td></td>
    <td></td>
    <td></td>
  <td>false</td>
  <td>true</td>
  <td>
  <p>This is a foreign key referencing the primary key of the msg_main table for the top thread message that is not associated to a group. This applies only to ULTRA and is used to manage discussion subscription.</p>
  </td>
</tr>
<tr>
  <td><a name="column-top_level_response_users_pk1">top_level_response_users_pk1</a></td>
  <td>id</td>
    <td></td>
    <td></td>
    <td></td>
  <td>false</td>
  <td>true</td>
  <td>
  <p>This is a foreign key referencing the primary key of the users table for the actor of the top level response of the message.</p>
  </td>
</tr>
<tr>
  <td><a name="column-actor_acts_as_instructor_ind">actor_acts_as_instructor_ind</a></td>
  <td>char(1)</td>
    <td>'N'</td>
    <td class="valueConstraint">indicator_actor_acts_as_instructor
      <ul>
          <li> <span>Y</span>
          </li>
          <li> <span>N</span>
          </li>
      </ul>
    </td>
    <td></td>
  <td>false</td>
  <td>true</td>
  <td>
  <p>This is a boolean flag (Y/N) indicating if the actor of the message acts as an instructor.</p>
  </td>
</tr>
<tr>
  <td><a name="column-highlight_ind">highlight_ind</a></td>
  <td>char(1)</td>
    <td>'N'</td>
    <td class="valueConstraint">indicator_highlight
      <ul>
          <li> <span>Y</span>
          </li>
          <li> <span>N</span>
          </li>
      </ul>
    </td>
    <td></td>
  <td>false</td>
  <td>true</td>
  <td>
  <p>This is a boolean flag (Y/N) indicating if the user name should be highlighted in the stream as moderator or manager. An extra check is done in the java code to check if it still should be highlighted.</p>
  </td>
</tr>
<tr>
  <td><a name="column-indirect_ind">indirect_ind</a></td>
  <td>char(1)</td>
    <td></td>
    <td class="valueConstraint">indicator_dse_indirect
      <ul>
          <li> <span>Y</span>
          </li>
          <li> <span>N</span>
          </li>
      </ul>
    </td>
    <td></td>
  <td>false</td>
  <td>true</td>
  <td>
  <p>This is a boolean flag (Y/N) indicating if the discussion is within the INDIRECT content area (In Ultra courses an INDIRECT courseToc is created which is not 'visible' to the users in the UI.  Things like conversations-on-content are created within this folder as a forum link but need to be presented differently in the stream - as a conversation and not a discussion)</p>
  </td>
</tr>
  </tbody>
</table>

  <div class="copyright">
    Version 3902.1.0, copyright &copy; 2010-2012 Blackboard Inc. All Rights Reserved
  </div>
</body>
</html>
