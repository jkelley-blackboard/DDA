<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Working with Blackboard Direct Data Access (DDA)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Documentation and resources for working with Blackboard Direct Data Access (DDA)." />
  <style>
    :root { --text:#111; --muted:#555; --bg:#fff; --link:#004aad; --link-visited:#6b2fb8; --focus:#ffbf47; --border:#ddd; }
    html { font-size: 16px; }
    body { margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; color:var(--text); background:var(--bg); line-height:1.6; }
    a { color:var(--link); }
    a:visited { color:var(--link-visited); }
    a:focus, button:focus, [tabindex]:focus { outline: 3px solid var(--focus); outline-offset: 2px; }
    header, nav, main, footer { max-width: 72rem; margin: 0 auto; padding: 1rem; }
    header { padding-top: 1.25rem; }
    .skip-link {
      position: absolute; left: -9999px; top: auto; width: 1px; height: 1px; overflow: hidden;
    }
    .skip-link:focus { position: static; width: auto; height: auto; padding: .5rem .75rem; background:#000; color:#fff; }
    nav[aria-label="Primary"] {
      border-block: 1px solid var(--border);
      margin-block: .75rem 1rem; padding-block: .5rem;
    }
    nav ul { display:flex; flex-wrap:wrap; gap:.5rem 1rem; list-style:none; padding:0; margin:0; }
    nav a { text-decoration: none; border-bottom: 1px solid transparent; }
    nav a:hover { border-bottom-color: currentColor; }
    h1, h2, h3 { line-height: 1.25; }
    h1 { margin-top:.25rem; }
    h2 { margin-top:2rem; }
    p, li { max-width: 70ch; }
    code, pre { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; }
    pre { background:#0b0c0c; color:#f8f8f2; padding:1rem; overflow:auto; border-radius:.25rem; }
    pre code { color:inherit; }
    .label { font-weight:600; }
    .note { background:#f7f7f7; border-left:4px solid #999; padding:.75rem 1rem; margin:1rem 0; }
    .muted { color: var(--muted); }
    footer { border-top:1px solid var(--border); margin-top:2rem; font-size:.95rem; color:var(--muted); }
  </style>
</head>
<body>
  <a class="skip-link" href="#>

  <header>
    <h1>Working with DDA</h1>
    <p>This site provides documentation and resources for working with Blackboard’s Direct Data Access (DDA) service.</p>
    <p><a href="https://github.com/jkelley-blackboard/DDA"itHub repository</a></p>
  </header>

  <nav aria-label="Primary">
    <ul>
      <li>#official-docsOfficial docs</a></li>
      <li><a href="#ckagesSchema &amp; changes packages</a></li>
      <li><a href="#plorerExpanded schema explorer</a></li>
      <li>#securitySecurity considerations</a></li>
      <li>#schema-refreshSchema refresh &amp; permissions</a></li>
      <li>#dda-overviewDDA database overview</a></li>
      <li>#cross-db-joinsCross‑database joins (dblink)</a></li>
    </ul>
  </nav>

  <main id="main">
    <section id="official-docs">
      <h2>Official documentation</h2>
      <p>
        Visit the official Blackboard Help page for DDA:
        <a href="https://help.blackboard.com/Learn/Administrator/SaaS/Integrations/Direct_Data_Access  Direct Data Access — Blackboard Help
        </a>.
      </p>
      <div class="note" role="note" aria-label="Important note">
        <p class="label">Important:</p>
        <p>Nothing here supersedes your institution’s contract or Anthology’s official documentation. Anthology may make changes not yet reflected here. Always consult the official documentation and your agreements before making decisions based on this content.</p>
      </div>
    </section>

    <section id="schema-packages">
      <h2>Schema and changes packages</h2>
      <ul>
        <li><a href="https://bbprepo.blackboard.com/#browse/browse:releases:bbdn%2hema packages (bbprepo)</a></li>
        <li><a href="https://bbprepo.blackboard.com/#browse/browse:releases:bbdn%2fjdiff" reles (bbprepo)</a></li>
      </ul>
    </section>

    <section id="schema-explorer">
      <h2>Expanded schema explorer</h2>
      <p><a href="./schema-3902ma/index.htmlBrowse Expanded Schema v3902.1.0</a></p>
    </section>

    <section id="security">
      <h2>Security considerations</h2>
      <p>Store access credentials securely, avoid exposing sensitive learner or institutional data, use encrypted connections, and follow your organization’s data governance policies.</p>
    </section>

    <section id="schema-refresh">
      <h2>Schema refresh and permissions</h2>
      <p>If newly added tables produce a permission error for your DDA account, request a “refresh” (copy the username/password, delete the account, and recreate it with the same name and password).</p>
    </section>

    <section id="dda-overview">
      <h2>DDA database overview</h2>
      <p>Blackboard SaaS deployments use five distinct PostgreSQL databases to support core application functionality, reporting, and content management.</p>

      <ul>
        <li>
          <p><span class="label">BBxxxxxxxxxxxx</span> — Primary production database. Contains core application tables (courses, users, enrollments, grades, hierarchy, tools, etc.). Most reporting/integration work uses this database.</p>
        </li>
        <li>
          <p><span class="label">BBxxxxxxxxxxxx_admin</span> — System coordination database. Stores internal configuration and metadata. Rarely accessed for reporting or integrations.</p>
        </li>
        <li>
          <p><span class="label">BBxxxxxxxxxxxx_stats</span> — Reporting and analytics database.</p>
          <ul>
            <li><code>activity_accumulator</code> — Includes a permanent copy of the activity log, which is truncated to 180 days in the production database.</li>
            <li><code>ODS</code> tables — Transformed data specifically for activity reporting.</li>
          </ul>
        </li>
        <li>
          <p><span class="label">BBxxxxxxxxxxxx_cms_doc</span> — Content Collection document store. Powers file storage/retrieval; not documented and generally not used for reporting.</p>
        </li>
        <li>
          <p><span class="label">BBxxxxxxxxxxxx_cms</span> — Content Collection admin database. Manages metadata/configuration; rarely accessed and not typically relevant for reporting.</p>
        </li>
      </ul>

      <div class="note" role="note" aria-label="Database prefix note">
        <p>Replace <code>BBxxxxxxxxxxxx</code> with your actual database prefix (for example, <code>BB5c1c67a3c99fc</code>). Some older systems may have individual databases for each Content Collection root folder (e.g., <code>BBxxxxxxxxxxxx_cms_users</code>, <code>BBxxxxxxxxxxxx_cms_orgs</code>) with the same schema as <code>BBxxxxxxxxxxxx_cms_doc</code>.</p>
      </div>
    </section>

    <section id="cross-db-joins">
      <h2>Cross‑database joins with <code>dblink</code></h2>
      <p>Because DDA databases are physically separated, cross‑database joins require PostgreSQL’s <code>dblink</code> extension. Typically, connections are permitted from the main database to others (not the reverse) in production.</p>

      <h3>Enable the extension</h3>
<pre aria-label="SQL example: enable dblink"><code>CREATE EXTENSION IF NOT EXISTS dblink;</code></pre>

      <h3>Query another database</h3>
<pre aria-label="SQL example: basic dblink usage"><code>SELECT * FROM dblink(
  'dbname=BBxxxxxxxxxxxx_stats user=bbuser password=bbpassword',
  'SELECT pk1, activity_date FROM activity_accumulator'
) AS aa(pk1 INT, activity_date TIMESTAMP);</code></pre>

      <h3>Join example (<code>BBxxxxxxxxxxxx</code> ↔ <code>BBxxxxxxxxxxxx_stats</code>)</h3>
<pre aria-label="SQL example: join users with activity via dblink"><code>SELECT u.pk1, u.user_id, aa.activity_date
FROM users u
JOIN dblink(
  'dbname=BBxxxxxxxxxxxx_stats user=bbuser password=bbpassword',
  'SELECT user_pk1, activity_date FROM activity_accumulator'
) AS aa(user_pk1 INT, activity_date TIMESTAMP)
ON u.pk1 = aa.user_pk1;</code></pre>

      <p class="muted"><strong>Note:</strong> Use placeholders above; never embed real credentials in documentation or scripts stored in version control.</p>
    </section>
  </main>

  <footer>
    <p>© 2025 Anthology Inc. · Blackboard Direct Data Access Resources</p>
    <p>This documentation is provided “as is” without warranty of any kind.</p>
  </footer>
</body>
</html>
